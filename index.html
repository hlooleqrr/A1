<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù…Ù†ØµØ© ÙÙŠÙ†Ùˆ FINO - Ø­Ø§Ø³Ø¨Ø© ÙˆØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¨Ù†ÙˆÙƒ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- ØªÙØ¹ÙŠÙ„ PWA - Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ -->
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#0f172a" />

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Tajawal', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f3f4f6;
      color: #111827;
      direction: rtl;
      text-align: center;
    }

    header {
      background: linear-gradient(135deg, #0f172a, #1e3a8a);
      color: #fff;
      padding: 14px 10px;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    header h1 {
      margin: 0;
      font-size: 24px;
      font-weight: 700;
      letter-spacing: 0.03em;
    }

    header p {
      margin: 6px 0 0;
      font-size: 14px;
      opacity: 0.9;
    }

    main {
      max-width: 960px;
      margin: 0 auto;
      padding: 16px 10px 80px;
    }

    .card {
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 10px 25px rgba(15, 23, 42, 0.08);
      padding: 18px 14px;
      margin-bottom: 16px;
      text-align: right;
    }

    .card h2 {
      margin: 0 0 10px;
      font-size: 20px;
      color: #111827;
    }

    .card p {
      margin: 4px 0;
      font-size: 15px;
      line-height: 1.6;
    }

    .hero-title {
      font-size: 22px;
      margin-bottom: 6px;
      text-align: right;
    }

    .hero-sub {
      font-size: 15px;
      color: #4b5563;
      margin-bottom: 10px;
      text-align: right;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    button, .btn {
      border: none;
      border-radius: 999px;
      padding: 10px 16px;
      font-size: 15px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.1s ease;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      color: #fff;
      box-shadow: 0 10px 18px rgba(37, 99, 235, 0.35);
    }

    .btn-secondary {
      background: #e5e7eb;
      color: #111827;
    }

    .btn-danger {
      background: #ef4444;
      color: #fff;
    }

    button:active, .btn:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.15);
    }

    label {
      display: block;
      font-size: 14px;
      margin-bottom: 4px;
      color: #374151;
    }

    input[type="number"],
    input[type="text"],
    select {
      width: 100%;
      padding: 9px 10px;
      font-size: 14px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      outline: none;
      background: #f9fafb;
      transition: border 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    input:focus, select:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.15);
      background: #fff;
    }

    .field-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    @media (max-width: 640px) {
      .field-row {
        grid-template-columns: 1fr;
      }
    }

    .hidden {
      display: none !important;
    }

    .result-highlight {
      background: #eff6ff;
      border-radius: 12px;
      padding: 10px 12px;
      margin-top: 10px;
      border: 1px dashed #2563eb;
      font-size: 14px;
    }

    .result-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 14px;
    }

    .result-table th,
    .result-table td {
      border: 1px solid #e5e7eb;
      padding: 6px 8px;
      text-align: center;
    }

    .badge {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 11px;
      background: #e5e7eb;
      color: #111827;
    }

    .badge-primary {
      background: #dbeafe;
      color: #1d4ed8;
    }

    .text-center {
      text-align: center;
    }

    .text-sm { font-size: 13px; }
    .text-xs { font-size: 11px; }

    .mt-8 { margin-top: 8px; }
    .mt-12 { margin-top: 12px; }
    .mt-16 { margin-top: 16px; }

    .admin-warning {
      background: #fef3c7;
      border-radius: 10px;
      padding: 8px 10px;
      font-size: 13px;
      border: 1px solid #fbbf24;
      margin-bottom: 10px;
    }

    .table-small {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      margin-top: 8px;
    }

    .table-small th, .table-small td {
      border: 1px solid #e5e7eb;
      padding: 4px 6px;
      text-align: center;
      white-space: nowrap;
    }

    .table-small th { background: #f9fafb; }

    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #0b1120;
      color: #e5e7eb;
      font-size: 11px;
      padding: 6px 12px;
      text-align: center;
    }

    footer span.highlight {
      color: #fbbf24;
      font-weight: 600;
    }

    .tagline {
      font-size: 12px;
      color: #6b7280;
      margin-top: 4px;
    }

    .error-text {
      color: #b91c1c;
      font-size: 12px;
      margin-top: 4px;
    }

    .success-text {
      color: #16a34a;
      font-size: 12px;
      margin-top: 4px;
    }

  </style>
</head>
<body>
  <header>
    <h1>Ù…Ù†ØµØ© FINO - Ø­Ø§Ø³Ø¨Ø© ÙˆØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¨Ù†ÙˆÙƒ</h1>
    <p>Ù…Ù†ØµØ© Ø°ÙƒÙŠØ© ØªØ­Ø³Ø¨ Ù„Ùƒ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ÙˆØªÙØ±Ø´Ù‘Ø­ Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù†Ø³Ø¨ Ø®Ù„Ø§Ù„ Ø«ÙˆØ§Ù†Ù</p>
  </header>

  <main>
    <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <section id="landing" class="card">
      <h2 class="hero-title">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ğŸ‘‹</h2>
      <p class="hero-sub">
        Ù…Ù† Ù‡Ù†Ø§ ØªÙ‚Ø¯Ø± ØªØ­Ø³Ø¨ ØªÙ…ÙˆÙŠÙ„Ùƒ ÙˆØªØ´ÙˆÙ Ø£ÙØ¶Ù„ Ø¨Ù†Ùƒ Ù…Ù†Ø§Ø³Ø¨ Ù„Ùƒ Ù…Ù† Ø­ÙŠØ« Ø§Ù„Ù†Ø³Ø¨Ø© Ø­Ø³Ø¨ Ø±Ø§ØªØ¨Ùƒ
        ÙˆÙ†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ÙˆØ§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„Ù…Ø³Ø¬Ù‘Ù„Ø© ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±Ù.
      </p>
      <p class="hero-sub">
        Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù…ØµÙ…Ù…Ø© Ø¨Ø­ÙŠØ« ØªÙ‚Ø¯Ø± ØªØµÙˆÙ‘Ø± Ø§Ù„Ø´Ø§Ø´Ø© Ø£Ùˆ ØªØ­ÙØ¸Ù‡Ø§ ÙƒØµÙˆØ±Ø© ÙˆØªØ±Ø³Ù„Ù‡Ø§ Ù„Ù„Ø¹Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±Ø©.
      </p>

      <div class="btn-row">
        <button id="startCalcBtn" class="btn btn-primary">
          Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø³Ø¨Ø© <span>ğŸ“Š</span>
        </button>

        <button id="buyoutInfoBtn" class="btn btn-secondary">
          Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ â„¹ï¸
        </button>

        <button id="openAdminBtn" class="btn btn-secondary">
          Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ ğŸ”‘
        </button>
      </div>

      <p class="tagline mt-12">
        Ø£Ø³Ø¦Ù„Ø© Ø¨Ø³ÙŠØ·Ø© Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ© Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ø£Ø¯Ù‚ Ø­Ø³Ø¨Ø© Ù…Ù…ÙƒÙ†Ø©ØŒ Ù…Ø¹ Ù…Ø±ÙˆÙ†Ø© ØªØ­Ø¯ÙŠØ« Ù†Ø³Ø¨ Ø§Ù„Ø¨Ù†ÙˆÙƒ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±Ù.
      </p>
    </section>

    <!-- Ø­Ø§Ø³Ø¨Ø© Ø¨Ø³ÙŠØ·Ø© Ù„ØªØ±Ø´ÙŠØ­ Ø§Ù„Ø¨Ù†Ùƒ -->
    <section id="calcSection" class="card hidden">
      <h2>Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø³Ø¨Ø©</h2>
      <p class="text-sm">
        Ø£Ø¯Ø®Ù„ Ø±Ø§ØªØ¨Ùƒ ÙˆØ§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ØŒ ÙˆØ§Ù„Ù…Ù†ØµÙ‘Ø© ØªØ¨Ø­Ø« ÙÙŠ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„Ù…Ø³Ø¬Ù‘Ù„Ø© ÙˆØªØ¹Ø±Ø¶ Ù„Ùƒ Ø§Ù„Ø¨Ù†ÙˆÙƒ Ù…Ù† Ø§Ù„Ø£Ù‚Ù„ Ù†Ø³Ø¨Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰.
      </p>

      <form id="mainCalcForm" class="mt-12">
        <div class="field-row">
          <div>
            <label for="salaryInput">Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ (Ø±ÙŠØ§Ù„)</label>
            <input id="salaryInput" type="number" min="0" placeholder="Ù…Ø«Ø§Ù„: 12000" required />
          </div>

          <div>
            <label for="financeTypeSelect">Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„</label>
            <select id="financeTypeSelect" required>
              <option value="">Ø§Ø®ØªØ±...</option>
              <option value="ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ / Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ">ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ / Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ</option>
              <option value="ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ">ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ</option>
              <option value="Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ">Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ</option>
              <option value="Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ">Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ</option>
            </select>
          </div>
        </div>

        <button type="submit" class="btn btn-primary mt-16">
          Ø§Ø­Ø³Ø¨ ÙˆØªØ±Ø´Ù‘Ø­ Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù†Ø³Ø¨ âœ…
        </button>

        <button type="button" id="resetCalcBtn" class="btn btn-secondary mt-16">
          Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø¨Ø© ğŸ”
        </button>
      </form>

      <div id="calcError" class="error-text hidden"></div>

      <div id="resultSection" class="mt-16 hidden">
        <div id="resultCard" class="result-highlight">
          <div id="bestBankLine" class="text-sm"></div>
          <div id="extraInfo" class="text-xs mt-8">
            ÙŠÙ…ÙƒÙ†Ùƒ ØªØµÙˆÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø²Ø± "Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙƒØµÙˆØ±Ø©" Ø£Ø³ÙÙ„ Ø§Ù„Ø¬Ø¯ÙˆÙ„.
          </div>
        </div>

        <table class="result-table mt-12">
          <thead>
            <tr>
              <th>Ø§Ù„ØªØ±ØªÙŠØ¨</th>
              <th>Ø§Ù„Ø¨Ù†Ùƒ</th>
              <th>Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„</th>
              <th>Ù…Ù† Ø±Ø§ØªØ¨</th>
              <th>Ø¥Ù„Ù‰ Ø±Ø§ØªØ¨</th>
              <th>Ø§Ù„Ù†Ø³Ø¨Ø© %</th>
            </tr>
          </thead>
          <tbody id="resultTableBody">
          </tbody>
        </table>

        <button type="button" id="saveImageBtn" class="btn btn-secondary mt-12">
          Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙƒØµÙˆØ±Ø© ğŸ–¼ï¸
        </button>

        <button type="button" id="backToHomeBtn" class="btn btn-secondary mt-8">
          Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ© â¬…ï¸
        </button>
      </div>
    </section>

    <!-- ØªÙ†Ø¨ÙŠÙ‡ Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ (Ø­Ø§Ù„ÙŠØ§Ù‹ ØºÙŠØ± Ù…ÙØ¹Ù‘Ù„) -->
    <section id="buyoutInfoSection" class="card hidden">
      <h2>Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ</h2>
      <p class="text-sm">
        Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø­ØªØ³Ø§Ø¨ Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠØ© Ø¹Ø¨Ø± Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ø³Ø¨Ø©.
        Ø³ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« ÙˆØ¥Ø¶Ø§ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ø¥Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡.
      </p>

      <button type="button" id="backFromBuyoutBtn" class="btn btn-secondary mt-12">
        Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ© â¬…ï¸
      </button>
    </section>

    <!-- Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù -->
    <section id="adminLoginSection" class="card hidden">
      <h2>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù</h2>
      <div class="admin-warning">
        âš ï¸ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ù…Ø®ØµØµ Ù„Ù„Ù…Ø´Ø±ÙÙŠÙ† Ø§Ù„Ù…Ø±Ø®Ù‘Øµ Ù„Ù‡Ù… ÙÙ‚Ø·. Ø£ÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… ØºÙŠØ± Ù…ØµØ±Ø­ Ø¨Ù‡ Ù‚Ø¯ ÙŠØ¹ØªØ¨Ø± Ù…Ø®Ø§Ù„ÙØ©.
      </div>
      <form id="adminLoginForm">
        <label for="adminCodeInput">Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„</label>
        <input id="adminCodeInput" type="password" inputmode="numeric" maxlength="8" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„Ù…Ø´Ø±Ù" required />
        <button type="submit" class="btn btn-primary mt-12">
          Ø¯Ø®ÙˆÙ„ ğŸ”
        </button>
        <button type="button" id="cancelAdminLoginBtn" class="btn btn-secondary mt-12">
          Ø¥Ù„ØºØ§Ø¡ â¬…ï¸
        </button>
      </form>
      <div id="adminLoginError" class="error-text hidden">Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</div>
    </section>

    <!-- Ù„ÙˆØ­Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ù†ÙˆÙƒ -->
    <section id="adminPanelSection" class="card hidden">
      <h2>Ù„ÙˆØ­Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ù†ÙˆÙƒ</h2>
      <p class="text-sm">
        Ù…Ù† Ù‡Ù†Ø§ ØªØ¶ÙŠÙ ÙˆØªØ¹Ø¯Ù‘Ù„ Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„Ø±ÙˆØ§ØªØ¨ ÙˆÙ†Ø³Ø¨ Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­ Ù„ÙƒÙ„ Ø¨Ù†Ùƒ ÙˆÙ†ÙˆØ¹ ØªÙ…ÙˆÙŠÙ„.
        Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙØ³ØªØ®Ø¯Ù… ÙÙŠ ØªØ±Ø´ÙŠØ­ Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.
      </p>

      <div class="admin-warning mt-8">
        Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¨Ø¹Ø¶ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù€
        <span class="badge badge-primary">Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ</span>
        Ù„Ø¨Ù†ÙƒÙŠ <strong>Ø§Ù„Ø£Ù‡Ù„ÙŠ</strong> Ùˆ<strong>Ø§Ù„Ø¨Ù„Ø§Ø¯</strong> Ù…Ø¶Ø§ÙØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù†ÙŠØ§Ø¨Ø© Ø¹Ù† Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ØŒ ÙˆÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ø£Ùˆ Ø­Ø°ÙÙ‡Ø§.
      </div>

      <form id="bankForm" class="mt-12">
        <!-- Ù…Ø®ÙÙŠ Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø·Ø± -->
        <input type="hidden" id="settingId" />

        <div class="field-row">
          <div>
            <label for="bankNameSelect">Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ùƒ</label>
            <select id="bankNameSelect" required>
              <option value="">Ø§Ø®ØªØ±...</option>
              <option value="Ù…ØµØ±Ù Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ">Ù…ØµØ±Ù Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ</option>
              <option value="Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ">Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ</option>
              <option value="Ø¨Ù†Ùƒ Ø§Ù„Ø±ÙŠØ§Ø¶">Ø¨Ù†Ùƒ Ø§Ù„Ø±ÙŠØ§Ø¶</option>
              <option value="Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯">Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯</option>
              <option value="Ø¨Ù†Ùƒ Ø§Ù„Ø¬Ø²ÙŠØ±Ø©">Ø¨Ù†Ùƒ Ø§Ù„Ø¬Ø²ÙŠØ±Ø©</option>
              <option value="Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ø§Ù„ÙØ±Ù†Ø³ÙŠ">Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ø§Ù„ÙØ±Ù†Ø³ÙŠ</option>
              <option value="Ø¨Ù†Ùƒ Ø³Ø§Ø¨">Ø¨Ù†Ùƒ Ø³Ø§Ø¨</option>
              <option value="Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ù„ÙˆØ·Ù†ÙŠ">Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ù„ÙˆØ·Ù†ÙŠ</option>
              <option value="Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±">Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</option>
              <option value="Ø¨Ù†Ùƒ Ø¢Ø®Ø±">Ø¨Ù†Ùƒ Ø¢Ø®Ø± (Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… ÙÙŠ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª)</option>
            </select>
          </div>

          <div>
            <label for="financeTypeAdminSelect">Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„</label>
            <select id="financeTypeAdminSelect" required>
              <option value="">Ø§Ø®ØªØ±...</option>
              <option value="ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ / Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ">ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ / Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ</option>
              <option value="ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ">ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ</option>
              <option value="Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ">Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ</option>
              <option value="Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ">Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ</option>
            </select>
          </div>
        </div>

        <div class="field-row mt-8">
          <div>
            <label for="supportTypeSelect">Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø¹Ù… (Ù„Ù„Ø¹Ù‚Ø§Ø±ÙŠ)</label>
            <select id="supportTypeSelect">
              <option value="Ø§Ù„ÙƒÙ„">Ø§Ù„ÙƒÙ„</option>
              <option value="Ù…Ø¯Ø¹ÙˆÙ…">Ù…Ø¯Ø¹ÙˆÙ…</option>
              <option value="ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…">ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…</option>
            </select>
          </div>

          <div>
            <label for="profitRateInput">Ù†Ø³Ø¨Ø© Ù‡Ø§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­ (%)</label>
            <input id="profitRateInput" type="number" step="0.01" min="0" placeholder="Ù…Ø«Ø§Ù„: 1.79" required />
          </div>
        </div>

        <div class="field-row mt-8">
          <div>
            <label for="minSalaryInput">Ù…Ù† Ø±Ø§ØªØ¨ (Ø±ÙŠØ§Ù„)</label>
            <input id="minSalaryInput" type="number" min="0" placeholder="Ù…Ø«Ø§Ù„: 5000" required />
          </div>
          <div>
            <label for="maxSalaryInput">Ø¥Ù„Ù‰ Ø±Ø§ØªØ¨ (Ø±ÙŠØ§Ù„)</label>
            <input id="maxSalaryInput" type="number" min="0" placeholder="Ù…Ø«Ø§Ù„: 9999" required />
          </div>
        </div>

        <div class="btn-row mt-16">
          <button type="submit" class="btn btn-primary">
            Ø­ÙØ¸ Ø§Ù„Ø´Ø±ÙŠØ­Ø© ğŸ’¾
          </button>
          <button type="button" id="clearBankFormBtn" class="btn btn-secondary">
            Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ğŸ§¹
          </button>
          <button type="button" id="backFromAdminBtn" class="btn btn-secondary">
            Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ© â¬…ï¸
          </button>
        </div>

        <div id="bankFormMsg" class="success-text hidden mt-8"></div>
      </form>

      <h3 class="mt-16" style="font-size:16px; margin-top:18px;">Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„Ù…Ø³Ø¬Ù‘Ù„Ø©</h3>
      <table class="table-small">
        <thead>
          <tr>
            <th>#</th>
            <th>Ø§Ù„Ø¨Ù†Ùƒ</th>
            <th>Ø§Ù„ØªÙ…ÙˆÙŠÙ„</th>
            <th>Ø§Ù„Ø¯Ø¹Ù…</th>
            <th>Ù…Ù† Ø±Ø§ØªØ¨</th>
            <th>Ø¥Ù„Ù‰ Ø±Ø§ØªØ¨</th>
            <th>Ø§Ù„Ù†Ø³Ø¨Ø© %</th>
            <th>ØªØ­ÙƒÙ…</th>
          </tr>
        </thead>
        <tbody id="settingsTableBody">
          <!-- ÙŠÙ…ØªÙ„Ø¦ Ù…Ù† Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
        </tbody>
      </table>

      <p class="text-xs mt-8">
        Ù…Ù„Ø§Ø­Ø¸Ø©: Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ù†ÙˆÙƒ ÙŠÙ…ÙƒÙ† Ø¬Ù„Ø¨Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ùƒ (ÙˆØ¶Ø¹ Ø§Ù„ØµÙˆØ± ÙÙŠ Ù…Ø¬Ù„Ø¯ <code>img</code> Ø¨Ù†ÙØ³ Ø§Ù„Ø§Ø³Ù…).
      </p>
    </section>
  </main>

  <footer>
    Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù€ <span class="highlight">Ø³Ø±Ø¹Ø© ØªÙ…Ù„Ùƒ Ø§Ù„Ø¹Ù‚Ø§Ø± ÙˆØ§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ÙŠØ©</span> â€“ Ù…Ù†ØµØ© FINO Ù„Ø§ ØªÙØ¹ØªØ¨Ø± Ø¹Ø±Ø¶Ø§Ù‹ Ù…Ù„Ø²Ù…Ø§Ù‹ ÙˆØ¥Ù†Ù…Ø§ Ø£Ø¯Ø§Ø© ØªÙ‚Ø¯ÙŠØ±ÙŠØ© ØªÙ‚Ø±ÙŠØ¨ÙŠØ©.
  </footer>

  <!-- Ù…ÙƒØªØ¨Ø© Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙƒØµÙˆØ±Ø© -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <script>
    // ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø© =====
    const ADMIN_PIN = '9999'; // ØªÙ‚Ø¯Ø± ØªØºÙŠÙ‘Ø±Ù‡ Ù„Ùˆ Ø­Ø¨ÙŠØª
    const STORAGE_KEY = 'bankSettings';

    const landingSection = document.getElementById('landing');
    const calcSection = document.getElementById('calcSection');
    const buyoutInfoSection = document.getElementById('buyoutInfoSection');
    const adminLoginSection = document.getElementById('adminLoginSection');
    const adminPanelSection = document.getElementById('adminPanelSection');

    function showSection(section) {
      [landingSection, calcSection, buyoutInfoSection, adminLoginSection, adminPanelSection]
        .forEach(s => s.classList.add('hidden'));
      section.classList.remove('hidden');
    }

    // ===== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ =====
    let bankSettings = [];

    function loadSettings() {
      try {
        const stored = localStorage.getItem(STORAGE_KEY);
        bankSettings = stored ? JSON.parse(stored) : [];
      } catch (e) {
        bankSettings = [];
      }
    }

    function saveSettings() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(bankSettings));
      renderSettingsTable();
    }

    // ===== ØªÙ‡ÙŠØ¦Ø© Ø´Ø±Ø§Ø¦Ø­ Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© (ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ) Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯ Ùˆ Ø§Ù„Ø£Ù‡Ù„ÙŠ =====
    function seedInitialBuyoutSettings() {
      const initialSettings = [
        // Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯
        { bankName: 'Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 5000,  maxSalary: 9999,   profitRate: 2.99 },
        { bankName: 'Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 10000, maxSalary: 14999,  profitRate: 2.19 },
        { bankName: 'Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 15000, maxSalary: 19999,  profitRate: 1.99 },
        { bankName: 'Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 20000, maxSalary: 24999,  profitRate: 1.79 },
        { bankName: 'Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 25000, maxSalary: 34999,  profitRate: 1.59 },
        { bankName: 'Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 35000, maxSalary: 44999,  profitRate: 1.49 },
        { bankName: 'Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 45000, maxSalary: 64999,  profitRate: 1.29 },
        { bankName: 'Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 65000, maxSalary: 999999, profitRate: 0.99 },

        // Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ
        { bankName: 'Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 3000,  maxSalary: 3999,   profitRate: 3.49 },
        { bankName: 'Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 4000,  maxSalary: 6999,   profitRate: 2.99 },
        { bankName: 'Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 7000,  maxSalary: 9999,   profitRate: 2.89 },
        { bankName: 'Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 10000, maxSalary: 14999,  profitRate: 2.25 },
        { bankName: 'Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 15000, maxSalary: 24999,  profitRate: 1.79 },
        { bankName: 'Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 25000, maxSalary: 44999,  profitRate: 1.59 },
        { bankName: 'Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ', financeType: 'Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ', supportType: 'Ø§Ù„ÙƒÙ„', minSalary: 45000, maxSalary: 999999, profitRate: 0.99 }
      ];

      let changed = false;

      initialSettings.forEach(row => {
        const exists = bankSettings.some(item =>
          item.bankName === row.bankName &&
          item.financeType === row.financeType &&
          item.minSalary === row.minSalary &&
          item.maxSalary === row.maxSalary
        );
        if (!exists) {
          bankSettings.push({
            id: Date.now().toString() + Math.random().toString(16).slice(2),
            bankName: row.bankName,
            financeType: row.financeType,
            supportType: row.supportType,
            minSalary: row.minSalary,
            maxSalary: row.maxSalary,
            profitRate: row.profitRate
          });
          changed = true;
        }
      });

      if (changed) {
        saveSettings();
      } else {
        renderSettingsTable();
      }
    }

    // ===== Ø¹Ø±Ø¶ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ =====
    function renderSettingsTable() {
      const tbody = document.getElementById('settingsTableBody');
      tbody.innerHTML = '';

      if (!bankSettings.length) {
        const tr = document.createElement('tr');
        const td = document.createElement('td');
        td.colSpan = 8;
        td.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø±Ø§Ø¦Ø­ Ù…Ø³Ø¬Ù‘Ù„Ø© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.';
        tr.appendChild(td);
        tbody.appendChild(tr);
        return;
      }

      bankSettings
        .slice()
        .sort((a, b) => (a.bankName || '').localeCompare(b.bankName || ''))
        .forEach((item, index) => {
          const tr = document.createElement('tr');

          const tdIndex = document.createElement('td');
          tdIndex.textContent = index + 1;
          tr.appendChild(tdIndex);

          const tdBank = document.createElement('td');
          tdBank.textContent = item.bankName || '';
          tr.appendChild(tdBank);

          const tdFinance = document.createElement('td');
          tdFinance.textContent = item.financeType || '';
          tr.appendChild(tdFinance);

          const tdSupport = document.createElement('td');
          tdSupport.textContent = item.supportType || 'Ø§Ù„ÙƒÙ„';
          tr.appendChild(tdSupport);

          const tdMin = document.createElement('td');
          tdMin.textContent = item.minSalary ?? '';
          tr.appendChild(tdMin);

          const tdMax = document.createElement('td');
          tdMax.textContent = item.maxSalary ?? '';
          tr.appendChild(tdMax);

          const tdRate = document.createElement('td');
          tdRate.textContent = item.profitRate != null ? item.profitRate.toFixed(2) : '';
          tr.appendChild(tdRate);

          const tdActions = document.createElement('td');
          const editBtn = document.createElement('button');
          editBtn.textContent = 'ØªØ¹Ø¯ÙŠÙ„';
          editBtn.className = 'btn btn-secondary';
          editBtn.style.fontSize = '11px';
          editBtn.onclick = () => editSetting(item.id);

          const delBtn = document.createElement('button');
          delBtn.textContent = 'Ø­Ø°Ù';
          delBtn.className = 'btn btn-danger';
          delBtn.style.fontSize = '11px';
          delBtn.style.marginRight = '4px';
          delBtn.onclick = () => deleteSetting(item.id);

          tdActions.appendChild(editBtn);
          tdActions.appendChild(delBtn);
          tr.appendChild(tdActions);

          tbody.appendChild(tr);
        });
    }

    // ===== Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„ Ø´Ø±ÙŠØ­Ø© Ø¨Ù†Ùƒ =====
    const bankForm = document.getElementById('bankForm');
    const settingIdInput = document.getElementById('settingId');
    const bankFormMsg = document.getElementById('bankFormMsg');

    bankForm.addEventListener('submit', function (e) {
      e.preventDefault();

      const bankName = document.getElementById('bankNameSelect').value;
      const financeType = document.getElementById('financeTypeAdminSelect').value;
      const supportType = document.getElementById('supportTypeSelect').value || 'Ø§Ù„ÙƒÙ„';
      const profitRate = parseFloat(document.getElementById('profitRateInput').value || '0');
      const minSalary = parseFloat(document.getElementById('minSalaryInput').value || '0');
      const maxSalary = parseFloat(document.getElementById('maxSalaryInput').value || '0');

      if (!bankName || !financeType || isNaN(profitRate) || isNaN(minSalary) || isNaN(maxSalary)) {
        return;
      }

      const existingId = settingIdInput.value;

      if (existingId) {
        const idx = bankSettings.findIndex(s => s.id === existingId);
        if (idx >= 0) {
          bankSettings[idx] = {
            id: existingId,
            bankName,
            financeType,
            supportType,
            minSalary,
            maxSalary,
            profitRate
          };
        }
        bankFormMsg.textContent = 'ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø¨Ù†Ø¬Ø§Ø­.';
      } else {
        bankSettings.push({
          id: Date.now().toString() + Math.random().toString(16).slice(2),
          bankName,
          financeType,
          supportType,
          minSalary,
          maxSalary,
          profitRate
        });
        bankFormMsg.textContent = 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø´Ø±ÙŠØ­Ø© Ø¨Ù†Ø¬Ø§Ø­.';
      }

      bankFormMsg.classList.remove('hidden');
      setTimeout(() => bankFormMsg.classList.add('hidden'), 2000);

      saveSettings();
      bankForm.reset();
      settingIdInput.value = '';
    });

    document.getElementById('clearBankFormBtn').addEventListener('click', function () {
      bankForm.reset();
      settingIdInput.value = '';
    });

    function editSetting(id) {
      const item = bankSettings.find(s => s.id === id);
      if (!item) return;

      settingIdInput.value = item.id;
      document.getElementById('bankNameSelect').value = item.bankName || '';
      document.getElementById('financeTypeAdminSelect').value = item.financeType || '';
      document.getElementById('supportTypeSelect').value = item.supportType || 'Ø§Ù„ÙƒÙ„';
      document.getElementById('profitRateInput').value = item.profitRate ?? '';
      document.getElementById('minSalaryInput').value = item.minSalary ?? '';
      document.getElementById('maxSalaryInput').value = item.maxSalary ?? '';
      window.scrollTo({ top: bankForm.offsetTop - 60, behavior: 'smooth' });
    }

    function deleteSetting(id) {
      if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙŠØ­Ø©ØŸ')) return;
      bankSettings = bankSettings.filter(s => s.id !== id);
      saveSettings();
    }

    // ===== Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„ØªØ±Ø´ÙŠØ­ Ø§Ù„Ø¨Ù†Ùƒ =====
    const mainCalcForm = document.getElementById('mainCalcForm');
    const salaryInput = document.getElementById('salaryInput');
    const financeTypeSelect = document.getElementById('financeTypeSelect');
    const resultSection = document.getElementById('resultSection');
    const resultTableBody = document.getElementById('resultTableBody');
    const bestBankLine = document.getElementById('bestBankLine');
    const calcError = document.getElementById('calcError');

    mainCalcForm.addEventListener('submit', function (e) {
      e.preventDefault();
      calcError.classList.add('hidden');
      resultSection.classList.add('hidden');

      const salary = parseFloat(salaryInput.value || '0');
      const financeType = financeTypeSelect.value;

      if (!financeType || isNaN(salary) || salary <= 0) {
        calcError.textContent = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§ØªØ¨ ØµØ­ÙŠØ­ ÙˆØ§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„.';
        calcError.classList.remove('hidden');
        return;
      }

      const matches = bankSettings.filter(item =>
        item.financeType === financeType &&
        salary >= item.minSalary &&
        salary <= item.maxSalary
      );

      if (!matches.length) {
        calcError.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø±Ø§Ø¦Ø­ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø±Ø§ØªØ¨ ÙˆÙ†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¯Ø®Ù„ÙŠÙ†. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ø±Ø§Ø¬Ø¹Ø© Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±Ù.';
        calcError.classList.remove('hidden');
        return;
      }

      matches.sort((a, b) => a.profitRate - b.profitRate);

      resultTableBody.innerHTML = '';
      matches.forEach((item, index) => {
        const tr = document.createElement('tr');

        const tdRank = document.createElement('td');
        tdRank.textContent = index + 1;
        tr.appendChild(tdRank);

        const tdBank = document.createElement('td');
        tdBank.textContent = item.bankName;
        tr.appendChild(tdBank);

        const tdFinance = document.createElement('td');
        tdFinance.textContent = item.financeType;
        tr.appendChild(tdFinance);

        const tdMin = document.createElement('td');
        tdMin.textContent = item.minSalary;
        tr.appendChild(tdMin);

        const tdMax = document.createElement('td');
        tdMax.textContent = item.maxSalary;
        tr.appendChild(tdMax);

        const tdRate = document.createElement('td');
        tdRate.textContent = item.profitRate.toFixed(2) + ' %';
        tr.appendChild(tdRate);

        resultTableBody.appendChild(tr);
      });

      const best = matches[0];
      bestBankLine.textContent =
        'Ø£ÙØ¶Ù„ Ø¨Ù†Ùƒ Ø­Ø§Ù„ÙŠØ§Ù‹ Ø­Ø³Ø¨ Ø§Ù„Ø´Ø±Ø§Ø¦Ø­ Ø§Ù„Ù…Ø³Ø¬Ù‘Ù„Ø©: ' +
        best.bankName +
        ' Ø¨Ù†Ø³Ø¨Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ© ' +
        best.profitRate.toFixed(2) +
        '% Ù„Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§ØªØ¨ ÙˆÙ†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„.';

      resultSection.classList.remove('hidden');
      window.scrollTo({ top: resultSection.offsetTop - 80, behavior: 'smooth' });
    });

    document.getElementById('resetCalcBtn').addEventListener('click', function () {
      mainCalcForm.reset();
      resultSection.classList.add('hidden');
      calcError.classList.add('hidden');
    });

    document.getElementById('backToHomeBtn').addEventListener('click', function () {
      showSection(landingSection);
      resultSection.classList.add('hidden');
      calcError.classList.add('hidden');
    });

    // Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙƒØµÙˆØ±Ø©
    document.getElementById('saveImageBtn').addEventListener('click', function () {
      const resultCard = document.getElementById('resultCard');
      if (!window.html2canvas || !resultCard) {
        alert('Ù…ÙŠØ²Ø© Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø© ØºÙŠØ± Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.');
        return;
      }
      html2canvas(resultCard).then(canvas => {
        const link = document.createElement('a');
        link.download = 'fino-result.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
      });
    });

    // ===== ØªÙ†Ù‚Ù‘Ù„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… =====
    document.getElementById('startCalcBtn').addEventListener('click', function () {
      showSection(calcSection);
    });

    document.getElementById('buyoutInfoBtn').addEventListener('click', function () {
      showSection(buyoutInfoSection);
    });

    document.getElementById('backFromBuyoutBtn').addEventListener('click', function () {
      showSection(landingSection);
    });

    document.getElementById('openAdminBtn').addEventListener('click', function () {
      showSection(adminLoginSection);
    });

    document.getElementById('cancelAdminLoginBtn').addEventListener('click', function () {
      showSection(landingSection);
    });

    document.getElementById('backFromAdminBtn').addEventListener('click', function () {
      showSection(landingSection);
    });

    // ===== Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù =====
    const adminLoginForm = document.getElementById('adminLoginForm');
    const adminCodeInput = document.getElementById('adminCodeInput');
    const adminLoginError = document.getElementById('adminLoginError');

    adminLoginForm.addEventListener('submit', function (e) {
      e.preventDefault();
      const code = adminCodeInput.value.trim();
      if (code === ADMIN_PIN) {
        adminLoginError.classList.add('hidden');
        showSection(adminPanelSection);
      } else {
        adminLoginError.classList.remove('hidden');
      }
    });

    // ===== Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© =====
    window.addEventListener('load', function () {
      loadSettings();
      seedInitialBuyoutSettings();
      renderSettingsTable();
    });

    // ===== ØªØ³Ø¬ÙŠÙ„ Service Worker Ù„ØªÙØ¹ÙŠÙ„ PWA =====
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function () {
        navigator.serviceWorker
          .register('service-worker.js')
          .catch(function (err) {
            console.log('Service Worker registration failed:', err);
          });
      });
    }
  </script>
</body>
</html>