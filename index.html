<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù…Ù†ØµØ© FINO - ØªØ±Ø´ÙŠØ­ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ | FINO â€” Smart Finance Match</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Ø®Ø· Tajawal -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800;900&display=swap" rel="stylesheet">

  <!-- html2canvas (Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙƒØµÙˆØ±Ø© JPG) -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <style>
    *{box-sizing:border-box}
    :root{
      --bg:#f3f4f6;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#6b7280;
      --brand1:#0f172a;
      --brand2:#1e3a8a;
      --ok:#16a34a;
      --bad:#dc2626;
      --blue:#1d4ed8;
      --line:#e5e7eb;
      --shadow:0 10px 24px rgba(2,6,23,.10);
      --radius:18px;
    }
    body{
      font-family:'Tajawal', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      margin:0;
      background:var(--bg);
      color:var(--text);
      text-align:center;
      font-size:20px;
    }
    header{
      background:linear-gradient(135deg,var(--brand1),var(--brand2));
      color:#fff;
      padding:14px 10px;
      position:sticky;
      top:0;
      z-index:10;
      box-shadow:0 10px 25px rgba(2,6,23,.2);
    }
    header h1{
      margin:0;
      font-size:22px;
      font-weight:900;
      letter-spacing:.4px;
      line-height:1.25;
    }
    header .sub{
      margin-top:6px;
      font-size:14px;
      opacity:.9;
      font-weight:700;
    }

    .wrap{
      max-width:1100px;
      margin:18px auto 110px;
      padding:0 12px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:14px;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
    }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:14px;
      text-align:right;
    }
    .card h2{
      margin:0 0 10px;
      font-size:20px;
      font-weight:900;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .hint{
      margin:0 0 12px;
      color:var(--muted);
      font-size:14px;
      font-weight:700;
      line-height:1.7;
      text-align:right;
    }

    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 520px){
      .row{grid-template-columns:1fr}
    }

    label{
      display:block;
      font-size:14px;
      font-weight:900;
      margin:8px 0 6px;
      color:#111827;
      text-align:right;
    }
    select,input{
      width:100%;
      padding:12px 12px;
      font-size:18px;
      border-radius:14px;
      border:1px solid var(--line);
      outline:none;
      font-family:inherit;
      background:#fff;
    }
    input[type="range"]{
      padding:0;
      height:44px;
      border:none;
      background:transparent;
    }
    .mini{
      font-size:14px;
      font-weight:800;
      color:var(--muted);
      margin-top:6px;
      text-align:right;
      line-height:1.7;
    }

    .btns{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    .btn{
      border:none;
      border-radius:14px;
      padding:12px 14px;
      font-size:18px;
      font-weight:900;
      cursor:pointer;
      font-family:inherit;
    }
    .btn.primary{
      background:linear-gradient(135deg,#1e40af,#0ea5e9);
      color:#fff;
      flex:1;
      min-width:190px;
    }
    .btn.gray{
      background:#eef2ff;
      color:#1e3a8a;
      border:1px solid #c7d2fe;
      min-width:160px;
    }

    /* Ù†ØªÙŠØ¬Ø© */
    .resultBox{
      background:#f8fafc;
      border:1px dashed #cbd5e1;
      border-radius:16px;
      padding:12px;
      margin-top:10px;
      text-align:right;
    }
    .bigBlue{
      color:var(--blue);
      font-weight:900;
      font-size:20px;
      line-height:1.8;
    }
    .bigGreen{
      color:var(--ok);
      font-weight:900;
      font-size:22px;
      line-height:1.8;
    }
    .bigRed{
      color:var(--bad);
      font-weight:900;
      font-size:20px;
      line-height:1.8;
    }
    .smallLine{
      font-size:14px;
      font-weight:800;
      color:#334155;
      margin-top:6px;
      line-height:1.9;
    }
    .tiny{
      font-size:12px;
      color:var(--muted);
      font-weight:800;
      line-height:1.7;
      margin-top:8px;
    }
    .warn{
      background:#fff7ed;
      border:1px solid #fed7aa;
      color:#9a3412;
      border-radius:14px;
      padding:10px;
      font-size:14px;
      font-weight:900;
      line-height:1.8;
      text-align:right;
      margin-top:10px;
    }
    .warn.red{
      background:#fef2f2;
      border-color:#fecaca;
      color:#b91c1c;
    }

    /* Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¨Ù†ÙˆÙƒ */
    .banks{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:10px;
      margin-top:10px;
    }
    @media (max-width:520px){
      .banks{grid-template-columns:1fr}
    }
    .bankCard{
      border:1px solid var(--line);
      border-radius:16px;
      background:#fff;
      padding:10px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }
    .bankInfo{
      text-align:right;
      flex:1;
    }
    .bankName{
      font-weight:900;
      font-size:16px;
      margin:0;
    }
    .bankMeta{
      margin:3px 0 0;
      font-size:13px;
      font-weight:800;
      color:var(--muted);
      line-height:1.6;
    }
    .bankLogo{
      width:56px;height:56px;
      border-radius:14px;
      border:1px solid var(--line);
      background:#f8fafc;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex:0 0 56px;
    }
    .bankLogo img{
      width:100%;
      height:100%;
      object-fit:contain;
      background:#fff;
    }
    .pill{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      font-weight:900;
      border:1px solid var(--line);
      background:#f1f5f9;
      color:#0f172a;
      margin-top:6px;
    }

    /* ÙÙˆØªØ± + Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ */
    footer{
      position:fixed;
      left:0; right:0; bottom:0;
      background:rgba(255,255,255,.92);
      backdrop-filter: blur(10px);
      border-top:1px solid var(--line);
      padding:10px 12px;
      z-index:20;
    }
    .footIn{
      max-width:1100px;
      margin:0 auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .footTxt{
      text-align:right;
      font-size:12px;
      font-weight:900;
      color:#334155;
      line-height:1.6;
    }
    .admin-mini{
      display:flex;
      gap:8px;
      align-items:center;
      justify-content:flex-end;
    }
    .miniIcon{
      width:44px;
      height:44px;
      border-radius:14px;
      border:1px solid var(--line);
      background:#f8fafc;
      cursor:pointer;
      font-size:18px;
      font-weight:900;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ */
    .modal{
      position:fixed;
      inset:0;
      background:rgba(2,6,23,.55);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:100;
      padding:14px;
    }
    .modal.show{display:flex}
    .modalCard{
      width:min(980px,100%);
      max-height:86vh;
      overflow:auto;
      background:#fff;
      border-radius:20px;
      border:1px solid var(--line);
      box-shadow:0 30px 70px rgba(2,6,23,.35);
      padding:14px;
      text-align:right;
    }
    .modalTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      margin-bottom:10px;
    }
    .modalTop h3{
      margin:0;
      font-size:18px;
      font-weight:900;
    }
    .closeBtn{
      border:none;
      background:#fee2e2;
      color:#b91c1c;
      font-weight:900;
      border-radius:12px;
      padding:10px 12px;
      cursor:pointer;
      font-family:inherit;
      font-size:14px;
    }

    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0;
      overflow:hidden;
      border:1px solid var(--line);
      border-radius:16px;
      margin-top:10px;
      background:#fff;
    }
    th,td{
      padding:10px;
      border-bottom:1px solid var(--line);
      font-size:13px;
      font-weight:900;
      vertical-align:middle;
    }
    th{
      background:#f8fafc;
      color:#0f172a;
      text-align:right;
    }
    td{color:#111827}
    tr:last-child td{border-bottom:none}
    .tdBtns{
      display:flex;
      gap:6px;
      justify-content:flex-end;
      flex-wrap:wrap;
    }
    .sbtn{
      border:none;
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
      font-family:inherit;
      font-weight:900;
      font-size:12px;
    }
    .sbtn.blue{background:#dbeafe;color:#1d4ed8}
    .sbtn.red{background:#fee2e2;color:#b91c1c}
    .sbtn.gray{background:#f1f5f9;color:#0f172a;border:1px solid var(--line)}
  </style>
</head>

<body>
<header>
  <h1>Ù…Ù†ØµØ© FINO â€” ØªØ±Ø´ÙŠØ­ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ</h1>
  <div class="sub">FINO â€” Smart Finance Match</div>
</header>

<div class="wrap">
  <div class="grid">
    <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„ -->
    <div class="card">
      <h2>ğŸ§¾ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h2>
      <p class="hint">
        Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ Ø«Ù… Ø§Ø¶ØºØ· <b>Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø³Ø¨Ø©</b>. Ø³ÙŠØªÙ… ØªØ±Ø´ÙŠØ­ Ø£Ù‚Ù„ Ù†Ø³Ø¨Ø© (ØªÙ‚Ø±ÙŠØ¨ÙŠØ§Ù‹) Ø­Ø³Ø¨ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„.
      </p>

      <div class="row">
        <div>
          <label for="financeType">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ØªØ±ÙŠØ¯ Ø­Ø³Ø¨ØªÙ‡:</label>
          <select id="financeType">
            <option value="mortgage">ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ</option>
            <option value="personal">ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ Ø£Ùˆ ØªÙ…ÙˆÙŠÙ„ Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ</option>
            <option value="debt_personal">Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© (Ø´Ø®ØµÙŠ)</option>
            <option value="debt_mortgage">Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© (Ø¹Ù‚Ø§Ø±ÙŠ)</option>
          </select>
        </div>

        <div>
          <label for="jobType">Ù†ÙˆØ¹ Ø§Ù„ÙˆØ¸ÙŠÙØ©:</label>
          <select id="jobType">
            <option value="civil">Ù…Ø¯Ù†ÙŠ</option>
            <option value="military">Ø¹Ø³ÙƒØ±ÙŠ</option>
            <option value="semi_gov_private">Ø®Ø§Øµ Ø´Ø¨Ù‡ Ø­ÙƒÙˆÙ…ÙŠ</option>
            <option value="private_approved">Ø®Ø§Øµ Ù…Ø¹ØªÙ…Ø¯</option>
            <option value="private_unapproved">Ø®Ø§Øµ ØºÙŠØ± Ù…Ø¹ØªÙ…Ø¯</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div>
          <label for="clientName">Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…:</label>
          <input id="clientName" type="text" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ù…Ø¯" />
        </div>

        <div>
          <label for="salary">Ø§Ù„Ø±Ø§ØªØ¨ (Ø¨Ø§Ù„Ø±ÙŠØ§Ù„):</label>
          <input id="salary" type="number" inputmode="numeric" placeholder="Ù…Ø«Ø§Ù„: 12000" />
        </div>
      </div>

      <div class="row">
        <div>
          <label for="months">Ù…Ø¯Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ (Ø¨Ø§Ù„Ø£Ø´Ù‡Ø±):</label>
          <input id="months" type="range" min="12" max="360" step="1" value="240">
          <div class="mini" id="monthsText">240 Ø´Ù‡Ø±</div>
        </div>

        <div>
          <label for="monthlyDeduction">Ø§Ù„Ù‚Ø³Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ (ØªÙ‚Ø±ÙŠØ¨ÙŠ) Ø¨Ø§Ù„Ø±ÙŠØ§Ù„:</label>
          <input id="monthlyDeduction" type="number" inputmode="numeric" placeholder="Ù…Ø«Ø§Ù„: 4500" />
          <div class="mini">Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ø· ÙŠÙØ³ØªØ®Ø¯Ù… Ù„Ù„Ø­Ø³Ø¨Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ù„Ù„ØªÙ…ÙˆÙŠÙ„.</div>
        </div>
      </div>

      <div class="row">
        <div>
          <label for="supportedMortgage">Ù‡Ù„ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ù…Ø¯Ø¹ÙˆÙ…ØŸ</label>
          <select id="supportedMortgage">
            <option value="no">Ù„Ø§</option>
            <option value="yes">Ù†Ø¹Ù…</option>
          </select>
          <div class="mini">Ø¥Ø°Ø§ Ø§Ø®ØªØ±Øª Ù…Ø¯Ø¹ÙˆÙ…ØŒ Ø³ÙŠØ¸Ù‡Ø± Ø¯Ø¹Ù… Ø­ÙƒÙˆÙ…ÙŠ Ø´Ù‡Ø±ÙŠ (Ù„Ø§ ÙŠÙØ¶Ø§Ù Ù„Ù„ØµØ§ÙÙŠ).</div>
        </div>

        <div>
          <label for="sakaniDownPayment">Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ Ø¯ÙØ¹Ø© Ù…Ù‚Ø¯Ù…Ø© Ù…Ù† Ø³ÙƒÙ†ÙŠØŸ</label>
          <select id="sakaniDownPayment">
            <option value="yes">Ù†Ø¹Ù…</option>
            <option value="no">Ù„Ø§</option>
          </select>
          <div class="mini">Ø­Ø³Ø¨ Ø·Ù„Ø¨Ùƒ: ÙÙŠ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ… + Ø¥Ø°Ø§ Ø§Ø®ØªØ±Øª (Ù„Ø§) ÙŠØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø´Ù‡Ø±ÙŠ.</div>
        </div>
      </div>

      <div class="row">
        <div>
          <label for="sakaniAddedSupport">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§Ù Ù…Ù† Ø³ÙƒÙ†ÙŠ (Ù…Ø¨Ù„Øº) Ø¥Ù† ÙˆØ¬Ø¯:</label>
          <input id="sakaniAddedSupport" type="number" inputmode="numeric" placeholder="Ù…Ø«Ø§Ù„: 100000" />
          <div class="mini">Ù‡Ø°Ø§ Ù…Ø¨Ù„Øº ÙŠÙØ¶Ø§Ù Ù„Ù„ØµØ§ÙÙŠ (Ø¥Ø°Ø§ Ù…ÙˆØ¬ÙˆØ¯). Ø§ØªØ±ÙƒÙ‡ 0 Ø¥Ø°Ø§ ØºÙŠØ± Ù…ØªÙˆÙØ±.</div>
        </div>

        <div>
          <label for="itizazEnable">Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø¯Ø¹Ù… Ø§Ø¹ØªØ²Ø§Ø² Ù„Ù„Ø¹Ø³ÙƒØ±ÙŠØŸ</label>
          <select id="itizazEnable">
            <option value="no">Ù„Ø§</option>
            <option value="yes">Ù†Ø¹Ù…</option>
          </select>
          <div class="mini">Ø§Ø¹ØªØ²Ø§Ø² Ø«Ø§Ø¨Øª 160,000 Ø±ÙŠØ§Ù„ (ÙŠÙØ¶Ø§Ù Ù„Ù„ØµØ§ÙÙŠ Ù„Ø£Ù†Ù‡ Ù…Ø¨Ù„Øº).</div>
        </div>
      </div>

      <div class="btns">
        <button class="btn primary" id="calcBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø³Ø¨Ø©</button>
        <button class="btn gray" id="resetBtn" title="Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø¨Ø©">ğŸ” Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø¨Ø©</button>
      </div>

      <div class="warn red" id="negWarn" style="display:none;">
        Ù†Ø¹ØªØ°Ø± Ù…Ù†Ùƒ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙ…ÙˆÙŠÙ„Ùƒ
      </div>

      <div class="warn" id="privateWarn" style="display:none;">
        ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù„Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø®Ø§Øµ Ø¬Ù…ÙŠØ¹Ø§Ù‹ Ù„Ø§Ø¨Ø¯ Ø§Ø¹ØªÙ…Ø§Ø¯Ù‡ Ù…Ù† Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ù…Ù…ÙˆÙ„Ø©.
      </div>

      <div class="warn" id="itizazWarn" style="display:none;">
        ØªÙ†Ø¨ÙŠÙ‡: Ø¯Ø¹Ù… ÙˆØ²Ø§Ø±Ø© Ø§Ù„Ø¯ÙØ§Ø¹ (Ø§Ø¹ØªØ²Ø§Ø²) ØªØ¨Ø¯Ø£ Ø§Ù„Ø£Ù‚Ø³Ø§Ø· Ø¨Ø¹Ø¯ Ø³Ù†ØªÙŠÙ† ÙˆÙ„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù„Ù„Ù‚Ø³Ø· â€” ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø¬Ù‡Ø© Ø¹Ù…Ù„Ùƒ Ù„Ù…Ø¹Ø±ÙØ© ÙƒØ§ÙØ© Ø§Ù„ØªÙØ§ØµÙŠÙ„.
      </div>
    </div>

    <!-- Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
    <div class="card">
      <h2>ğŸ“Œ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø­Ø³Ø¨Ø© (Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠØ©)</h2>
      <p class="hint">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø´Ù‡Ø±ÙŠ Ù„Ø§ ÙŠÙØ¶Ø§Ù Ø¹Ù„Ù‰ Ø§Ù„ØµØ§ÙÙŠ Ù„Ø£Ù†Ù‡ Ø¯Ø¹Ù… Ø´Ù‡Ø±ÙŠ.</p>

      <div id="resultCapture" class="resultBox">
        <div class="bigBlue" id="helloTxt" style="display:none;">Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙˆÙ…Ø³Ù‡Ù„Ø§</div>

        <div class="bigGreen" id="netMainTxt">ØµØ§ÙÙŠ Ø§Ù„ØªÙ…ÙˆÙŠÙ„: â€”</div>

        <div class="bigGreen" id="netPlusSupportTxt">ØµØ§ÙÙŠ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ + Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§Ù: â€”</div>

        <div class="smallLine" id="supportBreakdownTxt">ØªÙØµÙŠÙ„ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§Ù: â€”</div>

        <div class="smallLine" id="monthlySupportTxt">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠ Ø§Ù„Ø´Ù‡Ø±ÙŠ: â€”</div>

        <hr style="border:none;border-top:1px solid var(--line);margin:10px 0;">

        <div class="smallLine" id="bestBankTxt">Ø£ÙØ¶Ù„ Ø¨Ù†Ùƒ (ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹): â€”</div>
        <div class="smallLine" id="rateTxt">Ø§Ù„Ù†Ø³Ø¨Ø©: â€”</div>

        <div class="smallLine" id="profitTxt">Ø§Ù„Ø±Ø¨Ø­ Ø¯ÙˆÙ† Ø§Ù„Ø±Ø³ÙˆÙ…: â€”</div>
        <div class="smallLine" id="profitWithFeesTxt">Ø§Ù„Ø±Ø¨Ø­ Ù…Ø¹ Ø§Ù„Ø±Ø³ÙˆÙ…: â€”</div>
        <div class="tiny" id="vatTxt">Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø§Ø¯Ø§Ø±ÙŠØ©: â€”</div>
      </div>

      <div class="btns">
        <button class="btn primary" id="saveJpgBtn">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙƒØµÙˆØ±Ø© JPG</button>
      </div>

      <div class="card" style="margin-top:12px;">
        <h2>ğŸ¦ Ø§Ù„Ø¨Ù†ÙˆÙƒ</h2>
        <p class="hint">Ø¶Ø¹ ØµÙˆØ± Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ù†ÙˆÙƒ Ù‡Ù†Ø§ Ø¨ØªØ¹Ø¯ÙŠÙ„ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØµÙˆØ± Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ (img src).</p>
        <div class="banks" id="banksGrid"></div>
      </div>
    </div>
  </div>
</div>

<footer>
  <div class="footIn">
    <div class="footTxt">
      Ù…Ù†ØµØ© FINO â€” ØªØ±Ø´ÙŠØ­ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ<br>
      Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªÙ‚Ø±ÙŠØ¨ÙŠØ© ÙˆØªØ®ØªÙ„Ù Ø­Ø³Ø¨ Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ù…ÙˆÙ„Ø©.
    </div>

    <!-- âœ… Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¨Ø¬Ø§Ù†Ø¨ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ ÙˆØ¨Ù†ÙØ³ Ø§Ù„Ø´ÙƒÙ„ -->
    <div class="admin-mini">
      <button id="adminToolsBtn" class="miniIcon" title="Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„">ğŸ› ï¸</button>
      <button id="adminLoginBtn" class="miniIcon" title="Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„">â–«ï¸</button>
    </div>
  </div>
</footer>

<!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ -->
<div class="modal" id="adminModal">
  <div class="modalCard">
    <div class="modalTop">
      <h3>Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</h3>
      <button class="closeBtn" id="closeAdmin">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>

    <p class="hint">
      Ù‡Ù†Ø§ ØªÙ‚Ø¯Ø± ØªØ¶ÙŠÙ/ØªØ¹Ø¯Ù„/ØªØ­Ø°Ù Ù†Ø³Ø¨ Ø§Ù„Ø¨Ù†ÙˆÙƒ Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ ÙˆØ´Ø±ÙŠØ­Ø© Ø§Ù„Ø±Ø§ØªØ¨. ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¬Ù‡Ø§Ø² (localStorage).
    </p>

    <div class="row">
      <div>
        <label>Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ùƒ</label>
        <input id="a_bankName" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ" />
      </div>
      <div>
        <label>Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„</label>
        <select id="a_type">
          <option value="mortgage">ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ</option>
          <option value="personal">ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ/Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ</option>
          <option value="debt_personal">Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© (Ø´Ø®ØµÙŠ)</option>
          <option value="debt_mortgage">Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© (Ø¹Ù‚Ø§Ø±ÙŠ)</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div>
        <label>Ù…Ù† Ø±Ø§ØªØ¨</label>
        <input id="a_from" type="number" inputmode="numeric" placeholder="Ù…Ø«Ø§Ù„: 5000" />
      </div>
      <div>
        <label>Ø¥Ù„Ù‰ Ø±Ø§ØªØ¨</label>
        <input id="a_to" type="number" inputmode="numeric" placeholder="Ù…Ø«Ø§Ù„: 9999" />
      </div>
    </div>

    <div class="row">
      <div>
        <label>Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ© (Ù…Ø«Ø§Ù„ 4.25)</label>
        <input id="a_rate" type="number" inputmode="decimal" step="0.01" placeholder="Ù…Ø«Ø§Ù„: 4.25" />
      </div>
      <div>
        <label>Ø±Ø³ÙˆÙ… Ø¥Ø¯Ø§Ø±ÙŠØ© (Ø±ÙŠØ§Ù„)</label>
        <input id="a_fee" type="number" inputmode="numeric" placeholder="Ù…Ø«Ø§Ù„: 2500" />
      </div>
    </div>

    <div class="btns">
      <button class="btn primary" id="addOfferBtn">â• Ø¥Ø¶Ø§ÙØ© / Ø­ÙØ¸ Ø§Ù„Ø¹Ø±Ø¶</button>
      <button class="btn gray" id="seedBtn">ğŸ“Œ Ø¥Ø¶Ø§ÙØ© Ø¹Ø±ÙˆØ¶ Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</button>
    </div>

    <table>
      <thead>
        <tr>
          <th>Ø§Ù„Ø¨Ù†Ùƒ</th>
          <th>Ø§Ù„Ù†ÙˆØ¹</th>
          <th>Ø´Ø±ÙŠØ­Ø© Ø§Ù„Ø±Ø§ØªØ¨</th>
          <th>Ø§Ù„Ù†Ø³Ø¨Ø©</th>
          <th>Ø§Ù„Ø±Ø³ÙˆÙ…</th>
          <th>Ø¥Ø¯Ø§Ø±Ø©</th>
        </tr>
      </thead>
      <tbody id="offersTbody"></tbody>
    </table>

    <div class="tiny">Ø±Ù…Ø² Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯: 9999 (ØªÙ‚Ø¯Ø± ØªØºÙŠÙ‘Ø±Ù‡ Ù…Ù† Ø§Ù„Ù…ØªØºÙŠØ± ADMIN_PIN).</div>
  </div>
</div>

<script>
  /* =========================
     Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª + Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
  ========================== */
  const ADMIN_PIN = "9999";
  const LS_KEY = "FINO_OFFERS_V1";

  // Ø´Ø¹Ø§Ø±Ø§Øª (Ø¨Ø¯Ù‘Ù„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø¥Ø°Ø§ Ø¹Ù†Ø¯Ùƒ ØµÙˆØ± Ø¬Ø§Ù‡Ø²Ø©)
  const BANK_LOGOS = {
    "Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ": "",   // Ø¶Ø¹ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ø´Ø¹Ø§Ø± Ù‡Ù†Ø§
    "Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯": "",
    "Ù…ØµØ±Ù Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ": "",
    "Ø¨Ù†Ùƒ Ø§Ù„Ø±ÙŠØ§Ø¶": "",
    "Ø¨Ù†Ùƒ Ø§Ù„Ø¬Ø²ÙŠØ±Ø©": "",
    "Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ Ø§Ù„ÙØ±Ù†Ø³ÙŠ": "",
    "Ø³Ø§Ø¨": "",
    "Ø¨Ù†Ùƒ Ø§Ù„Ø¥Ù†Ù…Ø§Ø¡": ""
  };

  function formatMoney(n){
    const num = Number(n || 0);
    return Math.round(num).toLocaleString("en-US");
  }
  function typeLabel(t){
    return ({
      mortgage:"ØªÙ…ÙˆÙŠÙ„ Ø¹Ù‚Ø§Ø±ÙŠ",
      personal:"ØªÙ…ÙˆÙŠÙ„ Ø´Ø®ØµÙŠ/Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠ",
      debt_personal:"Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© (Ø´Ø®ØµÙŠ)",
      debt_mortgage:"Ø´Ø±Ø§Ø¡ Ù…Ø¯ÙŠÙˆÙ†ÙŠØ© (Ø¹Ù‚Ø§Ø±ÙŠ)"
    })[t] || t;
  }

  function loadOffers(){
    try{
      const raw = localStorage.getItem(LS_KEY);
      const arr = raw ? JSON.parse(raw) : [];
      return Array.isArray(arr) ? arr : [];
    }catch(e){ return []; }
  }
  function saveOffers(arr){
    localStorage.setItem(LS_KEY, JSON.stringify(arr || []));
  }

  /* =========================
     Ø±Ø¨Ø· Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
  ========================== */
  const financeTypeEl = document.getElementById("financeType");
  const jobTypeEl = document.getElementById("jobType");
  const clientNameEl = document.getElementById("clientName");
  const salaryEl = document.getElementById("salary");
  const monthsEl = document.getElementById("months");
  const monthsTextEl = document.getElementById("monthsText");
  const monthlyDeductionEl = document.getElementById("monthlyDeduction");

  const supportedEl = document.getElementById("supportedMortgage");
  const sakaniDownEl = document.getElementById("sakaniDownPayment");
  const sakaniAddedEl = document.getElementById("sakaniAddedSupport");
  const itizazEnableEl = document.getElementById("itizazEnable");

  const calcBtn = document.getElementById("calcBtn");
  const resetBtn = document.getElementById("resetBtn");
  const saveJpgBtn = document.getElementById("saveJpgBtn");

  const negWarn = document.getElementById("negWarn");
  const privateWarn = document.getElementById("privateWarn");
  const itizazWarn = document.getElementById("itizazWarn");

  const helloTxt = document.getElementById("helloTxt");
  const netMainTxt = document.getElementById("netMainTxt");
  const netPlusSupportTxt = document.getElementById("netPlusSupportTxt");
  const supportBreakdownTxt = document.getElementById("supportBreakdownTxt");
  const monthlySupportTxt = document.getElementById("monthlySupportTxt");
  const bestBankTxt = document.getElementById("bestBankTxt");
  const rateTxt = document.getElementById("rateTxt");
  const profitTxt = document.getElementById("profitTxt");
  const profitWithFeesTxt = document.getElementById("profitWithFeesTxt");
  const vatTxt = document.getElementById("vatTxt");

  const banksGrid = document.getElementById("banksGrid");

  // Admin
  const adminModal = document.getElementById("adminModal");
  const adminToolsBtn = document.getElementById("adminToolsBtn");
  const adminLoginBtn = document.getElementById("adminLoginBtn");
  const closeAdmin = document.getElementById("closeAdmin");

  const a_bankName = document.getElementById("a_bankName");
  const a_type = document.getElementById("a_type");
  const a_from = document.getElementById("a_from");
  const a_to = document.getElementById("a_to");
  const a_rate = document.getElementById("a_rate");
  const a_fee = document.getElementById("a_fee");
  const addOfferBtn = document.getElementById("addOfferBtn");
  const seedBtn = document.getElementById("seedBtn");
  const offersTbody = document.getElementById("offersTbody");

  let adminAuthed = false;
  let offers = loadOffers();

  /* =========================
     ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯Ø© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„ØªÙ…ÙˆÙŠÙ„
  ========================== */
  function refreshMonthsRange(){
    const t = financeTypeEl.value;
    // Ø­Ø³Ø¨ Ø·Ù„Ø¨Ùƒ: Ø§Ù„Ø´Ø®ØµÙŠ Ø£Ù‚ØµÙ‰ Ø´ÙŠØ¡ 60 Ø´Ù‡Ø±
    if (t === "personal" || t === "debt_personal"){
      monthsEl.max = 60;
      if (+monthsEl.value > 60) monthsEl.value = 60;
    } else {
      monthsEl.max = 360;
      if (+monthsEl.value < 12) monthsEl.value = 12;
    }
    monthsTextEl.textContent = monthsEl.value + " Ø´Ù‡Ø±";
  }
  financeTypeEl.addEventListener("change", refreshMonthsRange);
  monthsEl.addEventListener("input", () => monthsTextEl.textContent = monthsEl.value + " Ø´Ù‡Ø±");
  refreshMonthsRange();

  /* =========================
     ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙØ© / Ø§Ø¹ØªØ²Ø§Ø²
  ========================== */
  function refreshWarnings(){
    const job = jobTypeEl.value;
    const itiz = itizazEnableEl.value === "yes";

    privateWarn.style.display = (job !== "civil" && job !== "military") ? "block" : "none";
    itizazWarn.style.display = itiz ? "block" : "none";
  }
  jobTypeEl.addEventListener("change", refreshWarnings);
  itizazEnableEl.addEventListener("change", refreshWarnings);
  refreshWarnings();

  /* =========================
     Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ù†ÙˆÙƒ + Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª
  ========================== */
  function renderBanks(){
    const uniq = new Map();
    offers.forEach(o => {
      if (!uniq.has(o.bank)) uniq.set(o.bank, true);
    });

    // Ø¥Ø°Ø§ Ù…Ø§ ÙÙŠÙ‡ Ø¹Ø±ÙˆØ¶: Ø§Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª ÙÙ‚Ø·
    const names = uniq.size ? Array.from(uniq.keys()) : Object.keys(BANK_LOGOS);

    banksGrid.innerHTML = "";
    names.forEach(name=>{
      const logo = BANK_LOGOS[name] || "";
      const div = document.createElement("div");
      div.className = "bankCard";
      div.innerHTML = `
        <div class="bankInfo">
          <div class="bankName">${name}</div>
          <div class="bankMeta">Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø³Ø¨ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</div>
          <span class="pill">Ù…Ø±Ø®Ù‘Øµ/Ø¶Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</span>
        </div>
        <div class="bankLogo">
          ${logo ? `<img src="${logo}" alt="${name}">` : `<span style="font-weight:900;color:#64748b">LOGO</span>`}
        </div>
      `;
      banksGrid.appendChild(div);
    });
  }

  /* =========================
     ØªØ±Ø´ÙŠØ­ Ø£ÙØ¶Ù„ Ø¹Ø±Ø¶
  ========================== */
  function pickBestOffer(type, salary){
    const s = Number(salary || 0);
    const list = offers.filter(o => o.type === type && s >= o.from && s <= o.to);
    if (!list.length) return null;
    // Ø§Ù„Ø£Ù‚Ù„ Ù†Ø³Ø¨Ø© Ø£ÙˆÙ„Ø§Ù‹ØŒ Ø«Ù… Ø§Ù„Ø£Ù‚Ù„ Ø±Ø³ÙˆÙ…
    list.sort((a,b)=>{
      const r = (a.rate - b.rate);
      if (r !== 0) return r;
      return (a.fee - b.fee);
    });
    return list[0];
  }

  /* =========================
     Ø­Ø³Ø¨Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ© (Ù‚Ø³Ø· + Ù…Ø¯Ø© + Ù†Ø³Ø¨Ø©)
     - Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø´Ù‡Ø±ÙŠ Ù„Ø§ ÙŠØ¶Ø§Ù Ù„Ù„ØµØ§ÙÙŠ (Ø·Ù„Ø¨Ùƒ)
     - Ø§Ø¹ØªØ²Ø§Ø² 160,000 Ù…Ø¨Ù„Øº ÙŠØ¶Ø§Ù Ù„Ù„ØµØ§ÙÙŠ (Ø·Ù„Ø¨Ùƒ)
  ========================== */
  function calcApprox(){
    negWarn.style.display = "none";

    const name = (clientNameEl.value || "").trim();
    const type = financeTypeEl.value;
    const salary = Number(salaryEl.value || 0);
    const months = Number(monthsEl.value || 0);
    const monthlyPay = Number(monthlyDeductionEl.value || 0);

    const supported = supportedEl.value === "yes";
    const sakaniDownNo = sakaniDownEl.value === "no";
    const sakaniAdded = Number(sakaniAddedEl.value || 0);

    const itizazEnabled = itizazEnableEl.value === "yes";
    const itizazAmount = itizazEnabled ? 160000 : 0;

    // Ø¯Ø¹Ù… Ø­ÙƒÙˆÙ…ÙŠ Ø´Ù‡Ø±ÙŠ (Placeholder) â€” Ù„Ø§ ÙŠÙØ¶Ø§Ù Ù„Ù„ØµØ§ÙÙŠ
    // Ø­Ø³Ø¨ Ø·Ù„Ø¨Ùƒ Ø§Ù„Ø³Ø§Ø¨Ù‚ (Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø¹Ù…)ØŒ Ù‡Ù†Ø§ ÙˆØ¶Ø¹Ù†Ø§ Ù‚ÙŠÙ…Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© 0
    // ØªÙ‚Ø¯Ø± ØªØ¹Ø¯Ù‘Ù„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù„Ùˆ Ø¬Ø¯ÙˆÙ„Ùƒ Ø¬Ø§Ù‡Ø².
    let monthlyGovSupport = 0;
    if (type === "mortgage" && supported && sakaniDownNo){
      monthlyGovSupport = 0; // Ø¶Ø¹ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù‡Ù†Ø§ Ø¥Ø°Ø§ Ø±ØºØ¨Øª
    }

    // Ø£ÙØ¶Ù„ Ø¹Ø±Ø¶
    const best = pickBestOffer(type, salary);
    const rateAnnual = best ? Number(best.rate || 0) : 0;
    const adminFee = best ? Number(best.fee || 0) : 0;

    // Ø¥Ø°Ø§ Ù…Ø§ ÙÙŠÙ‡ Ù‚Ø³Ø· Ø£Ùˆ Ù…Ø¯Ø©ØŒ Ø§Ø¹Ø±Ø¶ â€” ÙÙ‚Ø·
    if (!months || months < 1 || !monthlyPay || monthlyPay <= 0){
      helloTxt.style.display = name ? "block" : "none";
      helloTxt.textContent = name ? `Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙˆÙ…Ø³Ù‡Ù„Ø§ ÙŠØ§ ${name}` : "Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙˆÙ…Ø³Ù‡Ù„Ø§";

      netMainTxt.textContent = "ØµØ§ÙÙŠ Ø§Ù„ØªÙ…ÙˆÙŠÙ„: â€”";
      netPlusSupportTxt.textContent = "ØµØ§ÙÙŠ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ + Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§Ù: â€”";
      supportBreakdownTxt.textContent = "ØªÙØµÙŠÙ„ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§Ù: â€”";
      monthlySupportTxt.textContent = "Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠ Ø§Ù„Ø´Ù‡Ø±ÙŠ: â€”";
      bestBankTxt.textContent = "Ø£ÙØ¶Ù„ Ø¨Ù†Ùƒ (ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹): â€”";
      rateTxt.textContent = "Ø§Ù„Ù†Ø³Ø¨Ø©: â€”";
      profitTxt.textContent = "Ø§Ù„Ø±Ø¨Ø­ Ø¯ÙˆÙ† Ø§Ù„Ø±Ø³ÙˆÙ…: â€”";
      profitWithFeesTxt.textContent = "Ø§Ù„Ø±Ø¨Ø­ Ù…Ø¹ Ø§Ù„Ø±Ø³ÙˆÙ…: â€”";
      vatTxt.textContent = "Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø§Ø¯Ø§Ø±ÙŠØ©: â€”";
      return;
    }

    // Ø­Ø³Ø¨Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠØ© Ù„Ù„ØªÙ…ÙˆÙŠÙ„ (Ù‚ÙŠÙ…Ø© Ø­Ø§Ù„ÙŠØ© Ù„Ù„Ø£Ù‚Ø³Ø§Ø·) Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ø³Ø¨Ø© Ø´Ù‡Ø±ÙŠØ©
    const r = (rateAnnual/100) / 12;
    let principal = 0;
    if (r > 0){
      principal = monthlyPay * (1 - Math.pow(1 + r, -months)) / r;
    }else{
      principal = monthlyPay * months; // Ø¨Ø¯ÙˆÙ† Ù†Ø³Ø¨Ø©
    }

    if (!isFinite(principal) || principal <= 0){
      negWarn.style.display = "block";
      return;
    }

    // ØµØ§ÙÙŠ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ (Ù‚Ø¨Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¨Ù„Øº)
    const netFinance = principal;

    // âœ… Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø´Ù‡Ø±ÙŠ Ù„Ø§ ÙŠÙØ¶Ø§Ù Ø¹Ù„Ù‰ Ø§Ù„ØµØ§ÙÙŠ (Ø·Ù„Ø¨Ùƒ)
    // âœ… Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§Ù (Ù…Ø¨Ù„Øº) ÙÙ‚Ø·: Ø³ÙƒÙ†ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº + Ø§Ø¹ØªØ²Ø§Ø²
    const addedSupportTotal = (sakaniAdded > 0 ? sakaniAdded : 0) + itizazAmount;
    const netWithAddedSupport = netFinance + addedSupportTotal;

    // Ø£Ø±Ø¨Ø§Ø­ ØªÙ‚Ø±ÙŠØ¨ÙŠØ©
    const totalPaid = monthlyPay * months;
    const profitNoFees = Math.max(0, totalPaid - principal);
    const vat = adminFee * 0.15;
    const profitWithFees = profitNoFees + adminFee + vat;

    // Ø¹Ø±Ø¶
    helloTxt.style.display = name ? "block" : "none";
    helloTxt.textContent = name ? `Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙˆÙ…Ø³Ù‡Ù„Ø§ ÙŠØ§ ${name}` : "Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙˆÙ…Ø³Ù‡Ù„Ø§";

    // Ø§Ù„ØµØ§ÙÙŠ (ÙˆØ§Ø¶Ø­)
    netMainTxt.textContent = name
      ? `ØªÙ…ÙˆÙŠÙ„Ùƒ Ø§Ù„ØµØ§ÙÙŠ ÙŠØ§ ${name}: ${formatMoney(netFinance)} Ø±ÙŠØ§Ù„`
      : `ØµØ§ÙÙŠ Ø§Ù„ØªÙ…ÙˆÙŠÙ„: ${formatMoney(netFinance)} Ø±ÙŠØ§Ù„`;

    // Ø§Ù„ØµØ§ÙÙŠ + Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§Ù (ÙˆØ§Ø¶Ø­)
    netPlusSupportTxt.textContent = `ØµØ§ÙÙŠ Ø§Ù„ØªÙ…ÙˆÙŠÙ„ + Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§Ù: ${formatMoney(netWithAddedSupport)} Ø±ÙŠØ§Ù„`;

    // ØªÙØµÙŠÙ„ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§Ù
    const parts = [];
    if (sakaniAdded > 0) parts.push(`Ø³ÙƒÙ†ÙŠ (Ù…Ø¨Ù„Øº): ${formatMoney(sakaniAdded)} Ø±ÙŠØ§Ù„`);
    if (itizazAmount > 0) parts.push(`Ø§Ø¹ØªØ²Ø§Ø²: ${formatMoney(itizazAmount)} Ø±ÙŠØ§Ù„`);
    supportBreakdownTxt.textContent = parts.length ? `ØªÙØµÙŠÙ„ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§Ù: ${parts.join(" + ")}` : "ØªÙØµÙŠÙ„ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¶Ø§Ù: Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¯Ø¹Ù… Ù…Ø¨Ù„Øº Ù…Ø¶Ø§Ù";

    // Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø´Ù‡Ø±ÙŠ (Ù„Ø§ ÙŠØ¶Ø§Ù Ù„Ù„ØµØ§ÙÙŠ)
    monthlySupportTxt.textContent = monthlyGovSupport
      ? `Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠ Ø§Ù„Ø´Ù‡Ø±ÙŠ: ${formatMoney(monthlyGovSupport)} Ø±ÙŠØ§Ù„/Ø´Ù‡Ø± (Ù„Ø§ ÙŠÙØ¶Ø§Ù Ù„Ù„ØµØ§ÙÙŠ)`
      : "Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠ Ø§Ù„Ø´Ù‡Ø±ÙŠ: â€”";

    // Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£ÙØ¶Ù„
    bestBankTxt.textContent = best ? `Ø£ÙØ¶Ù„ Ø¨Ù†Ùƒ (ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹): ${best.bank}` : "Ø£ÙØ¶Ù„ Ø¨Ù†Ùƒ (ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹): Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ø±Ø¶ Ù…Ø·Ø§Ø¨Ù‚ Ù„Ø´Ø±ÙŠØ­Ø© Ø§Ù„Ø±Ø§ØªØ¨";
    rateTxt.textContent = best ? `Ø§Ù„Ù†Ø³Ø¨Ø©: ${best.rate}% Ø³Ù†ÙˆÙŠØ§Ù‹` : "Ø§Ù„Ù†Ø³Ø¨Ø©: â€”";

    profitTxt.textContent = `Ø§Ù„Ø±Ø¨Ø­ Ø¯ÙˆÙ† Ø§Ù„Ø±Ø³ÙˆÙ…: ${formatMoney(profitNoFees)} Ø±ÙŠØ§Ù„`;
    profitWithFeesTxt.textContent = `Ø§Ù„Ø±Ø¨Ø­ Ù…Ø¹ Ø§Ù„Ø±Ø³ÙˆÙ…: ${formatMoney(profitWithFees)} Ø±ÙŠØ§Ù„`;
    vatTxt.textContent = `Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø§Ø¯Ø§Ø±ÙŠØ©: ${formatMoney(vat)} Ø±ÙŠØ§Ù„`;

    // Ø³Ø§Ù„Ø¨ØŸ
    if (monthlyPay <= 0 || netFinance <= 0){
      negWarn.style.display = "block";
    }
  }

  /* =========================
     Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙƒØµÙˆØ±Ø© JPG (ÙˆØ§Ø¶Ø­Ø©)
  ========================== */
  async function saveAsJPG(){
    const el = document.getElementById("resultCapture");
    const canvas = await html2canvas(el, {
      backgroundColor: "#ffffff",
      scale: 3,            // Ø±ÙØ¹ Ø§Ù„Ø¯Ù‚Ø©
      useCORS: true,
      logging: false
    });
    const dataUrl = canvas.toDataURL("image/jpeg", 0.95);

    const a = document.createElement("a");
    a.href = dataUrl;
    a.download = "FINO-Result.jpg";
    document.body.appendChild(a);
    a.click();
    a.remove();
  }

  /* =========================
     Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
  ========================== */
  function renderOffersTable(){
    offersTbody.innerHTML = "";
    offers.forEach((o, idx)=>{
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${o.bank}</td>
        <td>${typeLabel(o.type)}</td>
        <td>${formatMoney(o.from)} - ${formatMoney(o.to)}</td>
        <td>${o.rate}%</td>
        <td>${formatMoney(o.fee)} Ø±ÙŠØ§Ù„</td>
        <td class="tdBtns">
          <button class="sbtn blue" data-edit="${idx}">ØªØ¹Ø¯ÙŠÙ„</button>
          <button class="sbtn red" data-del="${idx}">Ø­Ø°Ù</button>
        </td>
      `;
      offersTbody.appendChild(tr);
    });

    offersTbody.querySelectorAll("[data-del]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const i = Number(btn.getAttribute("data-del"));
        offers.splice(i,1);
        saveOffers(offers);
        renderOffersTable();
        renderBanks();
      });
    });

    offersTbody.querySelectorAll("[data-edit]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const i = Number(btn.getAttribute("data-edit"));
        const o = offers[i];
        a_bankName.value = o.bank;
        a_type.value = o.type;
        a_from.value = o.from;
        a_to.value = o.to;
        a_rate.value = o.rate;
        a_fee.value = o.fee;
        // Ø¹Ù†Ø¯ Ø§Ù„Ø­ÙØ¸ Ø³ÙŠØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚ (Ù†ÙØ³ Ø§Ù„Ø¨Ù†Ùƒ/Ø§Ù„Ù†ÙˆØ¹/Ø§Ù„Ø´Ø±ÙŠØ­Ø©)
      });
    });
  }

  function upsertOffer(newO){
    // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¥Ø°Ø§ Ù†ÙØ³ Ø§Ù„Ø¨Ù†Ùƒ + Ø§Ù„Ù†ÙˆØ¹ + Ù†ÙØ³ Ø§Ù„Ø´Ø±ÙŠØ­Ø©
    const idx = offers.findIndex(o =>
      o.bank === newO.bank &&
      o.type === newO.type &&
      Number(o.from) === Number(newO.from) &&
      Number(o.to) === Number(newO.to)
    );
    if (idx >= 0) offers[idx] = newO;
    else offers.push(newO);
    saveOffers(offers);
    renderOffersTable();
    renderBanks();
  }

  function seedDefault(){
    const seed = [
      {bank:"Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ", type:"personal", from:5000, to:9999, rate:4.85, fee:2500},
      {bank:"Ø¨Ù†Ùƒ Ø§Ù„Ø¨Ù„Ø§Ø¯",           type:"personal", from:5000, to:9999, rate:4.75, fee:2000},
      {bank:"Ù…ØµØ±Ù Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ",         type:"mortgage", from:8000, to:14999, rate:5.10, fee:3500},
      {bank:"Ø¨Ù†Ùƒ Ø§Ù„Ø¥Ù†Ù…Ø§Ø¡",          type:"mortgage", from:8000, to:14999, rate:4.95, fee:3000},
      {bank:"Ø¨Ù†Ùƒ Ø§Ù„Ø±ÙŠØ§Ø¶",           type:"debt_personal", from:6000, to:11999, rate:5.20, fee:2500},
      {bank:"Ø³Ø§Ø¨",                  type:"debt_mortgage", from:9000, to:20000, rate:5.35, fee:4000},
    ];
    offers = seed;
    saveOffers(offers);
    renderOffersTable();
    renderBanks();
  }

  /* =========================
     Ø£Ø­Ø¯Ø§Ø«
  ========================== */
  calcBtn.addEventListener("click", ()=>{
    calcApprox();
  });

  resetBtn.addEventListener("click", ()=>{
    // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø³Ø¨Ø© Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± ØªØµÙ…ÙŠÙ…
    clientNameEl.value = "";
    salaryEl.value = "";
    monthlyDeductionEl.value = "";
    sakaniAddedEl.value = "";
    supportedEl.value = "no";
    sakaniDownEl.value = "yes";
    itizazEnableEl.value = "no";
    negWarn.style.display = "none";
    calcApprox();
    refreshWarnings();
  });

  saveJpgBtn.addEventListener("click", saveAsJPG);

  // âœ… Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ (â–«ï¸) Ø¨Ø¬Ø§Ù†Ø¨ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
  adminLoginBtn.addEventListener("click", ()=>{
    const code = prompt("Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„:");
    if (code === null) return;
    if (code.trim() === ADMIN_PIN){
      adminAuthed = true;
      adminModal.classList.add("show");
      renderOffersTable();
    }else{
      alert("Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­");
    }
  });

  // Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ (ğŸ› ï¸) ØªÙØªØ­ ÙÙ‚Ø· Ø¥Ø°Ø§ Ù…Ø³Ø¬Ù„
  adminToolsBtn.addEventListener("click", ()=>{
    if (!adminAuthed){
      alert("ÙØ¶Ù„Ø§Ù‹ Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ù…Ù† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© â–«ï¸");
      return;
    }
    adminModal.classList.add("show");
    renderOffersTable();
  });

  closeAdmin.addEventListener("click", ()=> adminModal.classList.remove("show"));
  adminModal.addEventListener("click", (e)=>{
    if (e.target === adminModal) adminModal.classList.remove("show");
  });

  addOfferBtn.addEventListener("click", ()=>{
    if (!adminAuthed) return;
    const bank = (a_bankName.value || "").trim();
    const type = a_type.value;
    const from = Number(a_from.value || 0);
    const to = Number(a_to.value || 0);
    const rate = Number(a_rate.value || 0);
    const fee = Number(a_fee.value || 0);

    if (!bank || !type || !from || !to || !rate){
      alert("ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¯Ø®Ø§Ù„: Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ùƒ + Ø§Ù„Ù†ÙˆØ¹ + Ø§Ù„Ø´Ø±ÙŠØ­Ø© + Ø§Ù„Ù†Ø³Ø¨Ø©");
      return;
    }
    upsertOffer({bank, type, from, to, rate, fee});

    a_bankName.value = "";
    a_from.value = "";
    a_to.value = "";
    a_rate.value = "";
    a_fee.value = "";
  });

  seedBtn.addEventListener("click", ()=>{
    if (!adminAuthed){
      alert("ÙØ¶Ù„Ø§Ù‹ Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹");
      return;
    }
    seedDefault();
  });

  // ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ
  renderOffersTable();
  renderBanks();
  calcApprox();
</script>
</body>
</html>